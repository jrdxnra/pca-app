<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCA App - Current State Insights</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            padding: 10px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
        }
        
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .overview-card {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        
        .overview-card.good {
            border-color: #4caf50;
            background: #e8f5e9;
        }
        
        .overview-card.warning {
            border-color: #ff9800;
            background: #fff3e0;
        }
        
        .overview-card.bad {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .card-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .card-content {
            color: #666;
            line-height: 1.6;
        }
        
        .card-content ul {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .flow-step-box {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #ddd;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .flow-step-box.good {
            border-color: #4caf50;
            background: #e8f5e9;
        }
        
        .flow-step-box.bad {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .flow-step-box.warning {
            border-color: #ff9800;
            background: #fff3e0;
        }
        
        .flow-arrow {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }
        
        .code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #d63384;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 8px;
        }
        
        .status-works {
            background: #d4edda;
            color: #155724;
        }
        
        .status-partial {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-broken {
            background: #f8d7da;
            color: #721c24;
        }
        
        .insight-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .insight-box.good {
            background: #e8f5e9;
            border-color: #4caf50;
        }
        
        .insight-box.warning {
            background: #fff3e0;
            border-color: #ff9800;
        }
        
        .insight-box.bad {
            background: #ffebee;
            border-color: #f44336;
        }
        
        .insight-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #333;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }
        
        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table tr:hover {
            background: #f5f5f5;
        }
        
        .architecture-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .layer-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #667eea;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .layer-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .layer-item {
            padding: 8px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 3px solid #667eea;
        }
        
        .layer-item.react-query {
            border-left-color: #4caf50;
        }
        
        .layer-item.zustand {
            border-left-color: #ff9800;
        }
        
        .layer-item.firebase {
            border-left-color: #ffa726;
        }
        
        .layer-item.google {
            border-left-color: #4285f4;
        }
        
        .migration-status {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .migration-item {
            flex: 1;
            min-width: 250px;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid;
        }
        
        .migration-item.done {
            background: #e8f5e9;
            border-color: #4caf50;
        }
        
        .migration-item.partial {
            background: #fff3e0;
            border-color: #ff9800;
        }
        
        .migration-item.todo {
            background: #f5f5f5;
            border-color: #9e9e9e;
        }
        
        .migration-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .migration-list {
            list-style: none;
            padding: 0;
        }
        
        .migration-list li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .migration-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
        }
        
        .migration-list.partial li:before {
            content: "‚ö†";
            color: #ff9800;
        }
        
        .migration-list.todo li:before {
            content: "‚óã";
            color: #9e9e9e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç PCA App - Current State Insights</h1>
        <p class="subtitle">Visual analysis of how the app is currently set up and working</p>
        
        <div class="section">
            <div class="section-title">üìä Overall Assessment</div>
            
            <div class="overview-grid">
                <div class="overview-card good">
                    <div class="card-title">‚úÖ What's Working Well</div>
                    <div class="card-content">
                        <ul>
                            <li>React Query partially implemented</li>
                            <li>Smart caching & retry logic</li>
                            <li>Separation of schedules vs workouts</li>
                            <li>Calendar events reading unified</li>
                            <li>Workout storage correctly in Firebase</li>
                        </ul>
                    </div>
                </div>
                
                <div class="overview-card warning">
                    <div class="card-title">‚ö†Ô∏è In Transition</div>
                    <div class="card-content">
                        <ul>
                            <li>Hybrid state management (React Query + Zustand)</li>
                            <li>Some data fetched from both sources</li>
                            <li>Calendar event creation inconsistent</li>
                            <li>Firebase fallback hides issues</li>
                        </ul>
                    </div>
                </div>
                
                <div class="overview-card bad">
                    <div class="card-title">‚ùå Issues</div>
                    <div class="card-content">
                        <ul>
                            <li>Some calendar events in Firebase (shouldn't be)</li>
                            <li>Quick workouts don't create Google Calendar events</li>
                            <li>Schedule timeslot clicks use Firebase only</li>
                            <li>Dual state management causes confusion</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="insight-box">
                <div class="insight-title">üí° Key Insight: You're in a Migration State</div>
                <div>
                    The app is actively evolving from Zustand-based state management to React Query. 
                    This creates a hybrid architecture where some parts are modernized and others are still using legacy patterns.
                    The core concept (schedules vs workouts separation) is correct, but implementation is inconsistent.
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üèóÔ∏è Architecture Layers</div>
            
            <div class="architecture-diagram">
                <div class="layer-box">
                    <div class="layer-title">üì± UI Layer</div>
                    <div class="layer-item">
                        <strong>Components:</strong> React components, dialogs, forms
                    </div>
                    <div class="layer-item">
                        <strong>State:</strong> Local useState + Zustand UI state
                    </div>
                    <div class="layer-item">
                        <strong>Status:</strong> ‚úÖ Good
                    </div>
                </div>
                
                <div class="layer-box">
                    <div class="layer-title">üîÑ State Management</div>
                    <div class="layer-item react-query">
                        <strong>React Query:</strong> Server data fetching (modern) ‚úÖ
                    </div>
                    <div class="layer-item zustand">
                        <strong>Zustand:</strong> UI state + some data (mixed) ‚ö†Ô∏è
                    </div>
                    <div class="layer-item">
                        <strong>Status:</strong> ‚ö†Ô∏è Hybrid - needs cleanup
                    </div>
                </div>
                
                <div class="layer-box">
                    <div class="layer-title">üóÑÔ∏è Data Sources</div>
                    <div class="layer-item google">
                        <strong>Google Calendar:</strong> Calendar events ‚úÖ (should be only source)
                    </div>
                    <div class="layer-item firebase">
                        <strong>Firebase:</strong> Workouts, clients, programs ‚úÖ
                    </div>
                    <div class="layer-item firebase">
                        <strong>Firebase calendarEvents:</strong> ‚ùå Should not exist
                    </div>
                    <div class="layer-item">
                        <strong>Status:</strong> ‚ö†Ô∏è Mixed - some in wrong place
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üì• How Reading Works (Current Flow)</div>
            
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-box good">
                        <strong>User opens Schedule/Dashboard</strong><br>
                        Component renders
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>React Query: useCalendarEvents()</strong><br>
                        <span class="code">const { data } = useCalendarEvents(start, end)</span><br>
                        <span class="status-badge status-works">‚úÖ Modern pattern</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>getCalendarEventsByDateRange()</strong><br>
                        Service function called
                    </div>
                </div>
                
                <div class="flow-step">
                    <div style="flex: 0 0 50px;"></div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>Check Google Calendar Connected?</strong><br>
                        <span class="code">checkGoogleCalendarAuth()</span>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div style="flex: 1; min-width: 200px;">
                        <div style="display: flex; gap: 15px;">
                            <div class="flow-step-box good" style="flex: 1;">
                                <strong>YES ‚Üí Google Calendar API</strong><br>
                                <span class="code">fetchCalendarEvents()</span><br>
                                <span class="status-badge status-works">‚úÖ Correct source</span>
                            </div>
                            <div class="flow-step-box bad" style="flex: 1;">
                                <strong>NO/FAIL ‚Üí Firebase fallback</strong><br>
                                <span class="code">getCalendarEventsByDateRange()</span><br>
                                <span class="status-badge status-broken">‚ùå Hides issues</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flow-step">
                    <div style="flex: 0 0 50px;"></div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>Merge & Deduplicate</strong><br>
                        Combine both sources (if both exist)
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>React Query Cache</strong><br>
                        Store in cache, return to component<br>
                        <span class="status-badge status-works">‚úÖ Automatic caching</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>Component Re-renders</strong><br>
                        Shows events in UI
                    </div>
                </div>
            </div>
            
            <div class="insight-box warning">
                <div class="insight-title">‚ö†Ô∏è Issue with Current Reading Flow</div>
                <div>
                    The Firebase fallback means if Google Calendar API fails, the app silently falls back to Firebase.
                    This hides the fact that events aren't in Google Calendar. The user might see events in the app
                    but not in their actual Google Calendar, causing confusion.
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üì§ How Creating Works (Current Flows)</div>
            
            <h3 style="margin-top: 20px; color: #333; font-size: 1.3em;">Path A: Period Assignment ‚úÖ (Works Correctly)</h3>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-box">
                        <strong>User assigns period</strong><br>
                        Via "Assign Period" dialog
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>handleAssignPeriod()</strong><br>
                        Creates period in Firebase
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>createRecurringCalendarEvent()</strong><br>
                        <span class="code">POST /api/calendar/events</span><br>
                        <span class="status-badge status-works">‚úÖ Google Calendar API</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>üìÖ Google Calendar</strong><br>
                        Recurring event created<br>
                        With RRULE, metadata
                    </div>
                </div>
                <div class="flow-step">
                    <div style="flex: 0 0 50px;"></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step-box good">
                        <strong>üí™ Firebase clientWorkouts</strong><br>
                        Individual workouts created<br>
                        Linked via periodId<br>
                        <span class="status-badge status-works">‚úÖ Correct - workouts belong here</span>
                    </div>
                </div>
                <div class="insight-box good" style="margin-top: 15px;">
                    <div class="insight-title">‚úÖ This Path Works Correctly</div>
                    <div>Creates schedule (Google Calendar) AND workouts (Firebase) separately but connected. This is the right pattern!</div>
                </div>
            </div>
            
            <h3 style="margin-top: 40px; color: #333; font-size: 1.3em;">Path B: Quick Workout ‚ùå (Incomplete)</h3>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-box">
                        <strong>User creates quick workout</strong><br>
                        Via "Quick Workout" button
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>QuickWorkoutBuilderDialog</strong><br>
                        User fills: exercises, sets, reps
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>createClientWorkout()</strong><br>
                        <span class="code">Firebase clientWorkouts</span><br>
                        <span class="status-badge status-works">‚úÖ Correct - workouts belong here</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>üí™ Firebase clientWorkouts</strong><br>
                        Workout stored<br>
                        Exercises, sets, reps, weights
                    </div>
                </div>
                <div class="flow-step">
                    <div style="flex: 0 0 50px;"></div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>If time provided:</strong><br>
                        Creates calendar event
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box bad">
                        <strong>createTestEvent()</strong><br>
                        <span class="code">Firebase calendarEvents ONLY</span><br>
                        <span class="status-badge status-broken">‚ùå Not in Google Calendar</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box bad">
                        <strong>üìÖ Firebase calendarEvents</strong><br>
                        Event stored here only<br>
                        NOT in Google Calendar<br>
                        <span class="status-badge status-broken">‚ùå Wrong location</span>
                    </div>
                </div>
                <div class="insight-box bad" style="margin-top: 15px;">
                    <div class="insight-title">‚ùå Problem with Quick Workouts</div>
                    <div>
                        Workout creation is correct (Firebase), but calendar event creation is wrong (Firebase instead of Google Calendar).
                        This means quick workouts with times won't show up in the user's actual Google Calendar.
                    </div>
                </div>
            </div>
            
            <h3 style="margin-top: 40px; color: #333; font-size: 1.3em;">Path C: Click Schedule Timeslot ‚ùå (Incomplete)</h3>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-box">
                        <strong>User clicks empty timeslot</strong><br>
                        In schedule grid
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box">
                        <strong>CreateScheduleEventDialog</strong><br>
                        User fills: client, category, title
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box bad">
                        <strong>createTestEvent()</strong><br>
                        <span class="code">Firebase calendarEvents ONLY</span><br>
                        <span class="status-badge status-broken">‚ùå Not in Google Calendar</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box bad">
                        <strong>üìÖ Firebase calendarEvents</strong><br>
                        Event stored<br>
                        Auto-creates workout<br>
                        <span class="status-badge status-broken">‚ùå Wrong location for schedule</span>
                    </div>
                </div>
                <div class="insight-box bad" style="margin-top: 15px;">
                    <div class="insight-title">‚ùå Problem with Schedule Timeslot Clicks</div>
                    <div>
                        When clicking an empty timeslot to create an event, it should create in Google Calendar API,
                        but currently creates in Firebase only. This won't show up in the user's actual calendar.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üîÑ State Management Patterns</div>
            
            <div class="comparison-table">
                <thead>
                    <tr>
                        <th>Data Type</th>
                        <th>Current Pattern</th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>Should Be</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Clients</strong></td>
                        <td>React Query ‚úÖ</td>
                        <td><span class="code">useClients()</span></td>
                        <td><span class="status-badge status-works">‚úÖ Good</span></td>
                        <td>Keep React Query</td>
                    </tr>
                    <tr>
                        <td><strong>Programs</strong></td>
                        <td>React Query ‚úÖ</td>
                        <td><span class="code">usePrograms()</span></td>
                        <td><span class="status-badge status-works">‚úÖ Good</span></td>
                        <td>Keep React Query</td>
                    </tr>
                    <tr>
                        <td><strong>Calendar Events (Read)</strong></td>
                        <td>React Query ‚úÖ</td>
                        <td><span class="code">useCalendarEvents()</span></td>
                        <td><span class="status-badge status-works">‚úÖ Good</span></td>
                        <td>Keep React Query</td>
                    </tr>
                    <tr>
                        <td><strong>Calendar Events (Create)</strong></td>
                        <td>Mixed ‚ö†Ô∏è</td>
                        <td>Google Calendar API OR Firebase</td>
                        <td><span class="status-badge status-broken">‚ùå Inconsistent</span></td>
                        <td>Google Calendar API only</td>
                    </tr>
                    <tr>
                        <td><strong>Workouts</strong></td>
                        <td>React Query ‚úÖ</td>
                        <td><span class="code">Firebase clientWorkouts</span></td>
                        <td><span class="status-badge status-works">‚úÖ Good</span></td>
                        <td>Keep Firebase (correct)</td>
                    </tr>
                    <tr>
                        <td><strong>UI State</strong></td>
                        <td>Zustand ‚úÖ</td>
                        <td><span class="code">useProgramStore</span> (selectedClient, calendarDate)</td>
                        <td><span class="status-badge status-works">‚úÖ Acceptable</span></td>
                        <td>Keep Zustand (UI state is fine)</td>
                    </tr>
                    <tr>
                        <td><strong>Client Programs</strong></td>
                        <td>Mixed ‚ö†Ô∏è</td>
                        <td>React Query + Zustand</td>
                        <td><span class="status-badge status-partial">‚ö†Ô∏è Confusing</span></td>
                        <td>Migrate fully to React Query</td>
                    </tr>
                </tbody>
            </div>
            
            <div class="insight-box warning">
                <div class="insight-title">‚ö†Ô∏è Dual State Management Problem</div>
                <div>
                    Some components fetch from BOTH React Query and Zustand, creating confusion about which is the source of truth.
                    For example, the programs page uses both <span class="code">usePrograms()</span> (React Query) and Zustand stores.
                    This can cause sync issues and makes the codebase harder to understand.
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üìà Migration Status</div>
            
            <div class="migration-status">
                <div class="migration-item done">
                    <div class="migration-title">‚úÖ Fully Migrated (React Query)</div>
                    <ul class="migration-list">
                        <li>Clients</li>
                        <li>Programs</li>
                        <li>Movements</li>
                        <li>Calendar Events (reading)</li>
                        <li>Configuration</li>
                    </ul>
                </div>
                
                <div class="migration-item partial">
                    <div class="migration-title">‚ö†Ô∏è Partially Migrated</div>
                    <ul class="migration-list partial">
                        <li>Calendar Events (creating - inconsistent)</li>
                        <li>Client Programs (uses both patterns)</li>
                    </ul>
                </div>
                
                <div class="migration-item todo">
                    <div class="migration-title">‚ùå Should Stay Zustand</div>
                    <ul class="migration-list todo">
                        <li>UI state (selectedClient, calendarDate)</li>
                        <li>Dashboard aggregations</li>
                        <li>Utilities (getLocationDisplay)</li>
                        <li>Config caching</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üéØ Key Insights</div>
            
            <div class="overview-grid">
                <div class="overview-card good">
                    <div class="card-title">‚úÖ What Makes Sense</div>
                    <div class="card-content">
                        <ul>
                            <li><strong>Workouts in Firebase</strong> - Correct location for exercise details</li>
                            <li><strong>Schedules in Google Calendar</strong> - Correct for time-based appointments</li>
                            <li><strong>Separation</strong> - Schedules and workouts are separate entities</li>
                            <li><strong>React Query for fetching</strong> - Modern, efficient pattern</li>
                            <li><strong>Connection via link</strong> - linkedWorkoutId connects them</li>
                        </ul>
                    </div>
                </div>
                
                <div class="overview-card bad">
                    <div class="card-title">‚ùå What Doesn't Make Sense</div>
                    <div class="card-content">
                        <ul>
                            <li><strong>Calendar events in Firebase</strong> - Should only be in Google Calendar</li>
                            <li><strong>Dual state management</strong> - Creates confusion and sync issues</li>
                            <li><strong>Firebase fallback</strong> - Hides the real problem (missing Google Calendar events)</li>
                            <li><strong>Inconsistent creation</strong> - Some paths use Google Calendar, some use Firebase</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="insight-box" style="margin-top: 30px;">
                <div class="insight-title">üí° Current Mental Model</div>
                <div style="font-size: 1.1em; line-height: 1.8;">
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="display: inline-block; padding: 20px; background: #e3f2fd; border-radius: 8px; margin: 10px;">
                            <strong style="color: #4285f4;">üìÖ SCHEDULE</strong><br>
                            Google Calendar API<br>
                            <em>"Workout with John at 2pm"</em>
                        </div>
                        <div style="display: inline-block; font-size: 2em; margin: 10px 20px; color: #667eea;">‚áÑ</div>
                        <div style="display: inline-block; padding: 20px; background: #fff3e0; border-radius: 8px; margin: 10px;">
                            <strong style="color: #ffa726;">üí™ WORKOUT</strong><br>
                            Firebase clientWorkouts<br>
                            <em>"3x5 Squats @ 225lbs"</em>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <strong>Connected via:</strong> <span class="code">linkedWorkoutId</span> in calendar event metadata
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px; border: 2px solid #4caf50;">
                        <strong style="color: #2e7d32;">‚úÖ This separation is CORRECT</strong><br>
                        They are SEPARATE entities that can exist independently OR be CONNECTED.
                        You can have a schedule without a workout, a workout without a schedule, or both together.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üîÑ Current Data Flow Example</div>
            
            <h3 style="margin-top: 20px; color: #333;">Scenario: User Creates Quick Workout with Time</h3>
            
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-box">
                        <strong>1. User Action</strong><br>
                        Creates quick workout<br>
                        Title: "Upper Body"<br>
                        Time: "2:00 PM"
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box good">
                        <strong>2. Create Workout</strong><br>
                        <span class="code">createClientWorkout()</span><br>
                        Exercises: Bench, Rows, Curls<br>
                        <span class="status-badge status-works">‚úÖ Stored in Firebase clientWorkouts</span>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="flow-step-box bad">
                        <strong>3. Create Calendar Event</strong><br>
                        <span class="code">createTestEvent()</span><br>
                        <span class="status-badge status-broken">‚ùå Stored in Firebase calendarEvents</span>
                    </div>
                </div>
                
                <div class="flow-step" style="margin-top: 30px;">
                    <div class="flow-step-box" style="flex: 1;">
                        <strong>Current Result:</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>‚úÖ Workout exists in Firebase</li>
                            <li>‚úÖ Event exists in Firebase</li>
                            <li>‚ùå Event does NOT exist in Google Calendar</li>
                            <li>‚ùå User checks their calendar ‚Üí workout not there</li>
                            <li>‚ö†Ô∏è App shows workout (reads from Firebase fallback)</li>
                            <li>‚ö†Ô∏è User confused: "Why isn't it in my calendar?"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">üéØ Bottom Line</div>
            
            <div class="overview-grid">
                <div class="overview-card good">
                    <div class="card-title">‚úÖ Strengths</div>
                    <div class="card-content">
                        <ul>
                            <li>Core architecture concept is correct</li>
                            <li>React Query well-configured</li>
                            <li>Recent fixes improved reading</li>
                            <li>Separation of concerns good</li>
                            <li>TypeScript throughout</li>
                        </ul>
                    </div>
                </div>
                
                <div class="overview-card warning">
                    <div class="card-title">‚ö†Ô∏è Current State</div>
                    <div class="card-content">
                        <ul>
                            <li>Hybrid architecture (migration in progress)</li>
                            <li>Some inconsistencies</li>
                            <li>Dual state management</li>
                            <li>Calendar event creation mixed</li>
                        </ul>
                    </div>
                </div>
                
                <div class="overview-card bad">
                    <div class="card-title">‚ùå Main Issue</div>
                    <div class="card-content">
                        <ul>
                            <li>Some calendar events in Firebase</li>
                            <li>Should ONLY be in Google Calendar</li>
                            <li>Quick workouts don't create Google Calendar events</li>
                            <li>Schedule clicks don't use Google Calendar API</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="insight-box" style="margin-top: 30px; background: #e7f3ff; border-color: #2196f3;">
                <div class="insight-title" style="font-size: 1.2em;">üéØ Summary</div>
                <div style="font-size: 1.05em; line-height: 1.8;">
                    The app is <strong>functionally working</strong> but has <strong>architectural debt</strong> from being in a migration state.
                    The foundation is solid (React Query, separation of concerns, correct mental model), but consistency needs improvement.
                    <br><br>
                    <strong>The main fix needed:</strong> Make ALL calendar event creation use Google Calendar API instead of Firebase.
                    Workouts stay in Firebase (correct), but schedules should ONLY be in Google Calendar.
                </div>
            </div>
        </div>
    </div>
</body>
</html>
